<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>She-Shield | Step-by-Step Safety</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f5efe6;
  color:#3a2c2c;
}
.container{
  max-width:420px;
  margin:auto;
  padding:16px;
}
h1{
  text-align:center;
  color:#e07a5f;
}
.step{
  background:#fffaf3;
  padding:14px;
  border-radius:14px;
  margin-bottom:14px;
  box-shadow:0 6px 16px rgba(0,0,0,0.08);
}
.step h3{
  margin:0 0 8px;
  color:#e07a5f;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}
.primary{background:#e07a5f;color:white;}
.secondary{background:#f4a261;color:white;}
.muted{background:#eee;}
small{opacity:.7}
</style>
</head>

<body>

<!-- ENABLE SCREEN -->
<div id="enableScreen" style="position:fixed;inset:0;background:#000000c0;display:flex;align-items:center;justify-content:center;z-index:9999">
  <div style="background:#fffaf3;padding:20px;border-radius:14px;text-align:center">
    <h2>Enable Safety System</h2>
    <p><small>Required to allow sound, mic & location</small></p>
    <button class="primary" onclick="enableSystem()">Enable</button>
  </div>
</div>

<div class="container">
<h1>She-Shield</h1>

<!-- STEP 1 -->
<div class="step">
  <h3>STEP 1 â€“ Siren Alert</h3>
  <button class="primary" onclick="startSiren()">ğŸ”Š Start Siren</button>
  <button class="muted" onclick="stopSiren()">Stop Siren</button>
</div>

<!-- STEP 2 -->
<div class="step">
  <h3>STEP 2 â€“ Emergency SOS</h3>
  <button class="primary" onclick="emergencySOS()">ğŸš¨ Emergency SOS</button>
</div>

<!-- STEP 3 -->
<div class="step">
  <h3>STEP 3 â€“ Share Live Location</h3>
  <button class="secondary" onclick="shareLocation()">ğŸ“ Share Location (WhatsApp)</button>
</div>

<!-- STEP 4 -->
<div class="step">
  <h3>STEP 4 â€“ Voice SOS</h3>
  <button class="secondary" onclick="startVoice()">ğŸ™ï¸ Say â€œHELPâ€</button>
  <small>Works after Enable (Chrome)</small>
</div>

<!-- STEP 5 -->
<div class="step">
  <h3>STEP 5 â€“ Emergency Helplines</h3>
  <a href="tel:112"><button class="primary">ğŸš” Police 112</button></a><br><br>
  <a href="tel:181"><button class="secondary">ğŸ‘© Women Helpline 181</button></a><br><br>
  <a href="tel:108"><button class="muted">ğŸš‘ Ambulance 108</button></a>
</div>

<div id="status"><small>Status: Ready</small></div>
</div>

<script>
let audioCtx, osc, recognition;

function enableSystem(){
  document.getElementById("enableScreen").style.display="none";
  audioCtx = new (window.AudioContext||webkitAudioContext)();
  audioCtx.resume();
  setStatus("System enabled");
}

function startSiren(){
  osc = audioCtx.createOscillator();
  osc.type="sawtooth";
  osc.frequency.value=700;
  osc.connect(audioCtx.destination);
  osc.start();
  navigator.vibrate?.([400,200,400]);
  setStatus("Siren ON");
}
function stopSiren(){
  osc?.stop();
  navigator.vibrate?.(0);
  setStatus("Siren OFF");
}

function emergencySOS(){
  startSiren();
  shareLocation();
  setStatus("Emergency SOS activated");
}

function shareLocation(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const msg=`I need help! My location: https://maps.google.com/?q=${pos.coords.latitude},${pos.coords.longitude}`;
    window.open("https://wa.me/?text="+encodeURIComponent(msg));
  });
}

function startVoice(){
  const SR = window.SpeechRecognition||window.webkitSpeechRecognition;
  if(!SR){alert("Voice not supported");return;}
  recognition = new SR();
  recognition.lang="en-US";
  recognition.onresult=e=>{
    const text=e.results[0][0].transcript.toLowerCase();
    setStatus("Heard: "+text);
    if(text.includes("help")||text.includes("sos")){
      emergencySOS();
    }
  };
  recognition.start();
  setStatus("Listeningâ€¦ say HELP");
}

function setStatus(t){
  document.getElementById("status").innerHTML="<small>Status: "+t+"</small>";
}
</script>

</body>
</html>
